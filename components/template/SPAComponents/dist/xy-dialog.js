initComponent("xy-dialog",{"template":"\n<!-- 组件HTML结构 -->\n<div class=\"xy-dialog__wrapper\">\n    <div class=\"xy-dialog__head\">\n        <button class=\"xy-button xy-dialog__close\">×</button>\n        <slot name=\"title\"></slot>\n    </div>\n    <div class=\"xy-dialog__body\">\n        <div class=\"xy-dialog__content\">\n            <slot name=\"content\"></slot>\n        </div>\n    </div>\n    <div class=\"xy-dialog__footer\">\n        <button class=\"xy-button xy-button-infos\">取消</button>\n        <button class=\"xy-button xy-button-success\">确定</button>\n    </div>\n</div>\n","script":"\n// 组件JavaScript代码\nclass XyDialog extends HTMLElement {\n\n    static get observedAttributes() {\n        // 监听name属性\n        return ['name'];\n    }\n\n    constructor() {\n        super();\n        // 添加Shadow Dom\n        this._shadowRoot = this.attachShadow({\n            mode: 'open'\n        });\n        this._tpl = document.querySelector('#xy-dialog-template');\n        this._close = this._close.bind(this);\n    }\n\n    get open() {\n        if (this.$wrapper && this.$wrapper.hasAttribute('open')) {\n            return JSON.parse(this.$wrapper.getAttribute('open'));\n        }\n        return false;\n    }\n\n    set open(status) {\n        this.$wrapper.setAttribute('open', status);\n    }\n\n    get name() {\n        return this.getAttribute('name') || '';\n    }\n\n    set name(val) {\n        return this.setAttribute('name', val);\n    }\n\n    attributeChangedCallback(name, oldVal, newVal, namespace) {\n        console.log(`${name} changed`);\n    }\n\n    connectedCallback() {\n        console.log('connectedCallback');\n\n        // 将模版结构注入shadowRoot\n        this._shadowRoot.appendChild(document.importNode(this._tpl.content, true));\n\n        const title = this.getAttribute('title');\n        const content = this.getAttribute('content');\n\n        if (title) {\n            const titleNode = document.createElement('h2');\n            titleNode.innerHTML = title;\n            this._shadowRoot.querySelector('.xy-dialog__title').appendChild(titleNode);\n        }\n\n        if (content) {\n            const contentNode = document.createTextNode(content);\n            this._shadowRoot.querySelector('.xy-dialog__content').appendChild(contentNode);\n        }\n        this.$wrapper = this._shadowRoot.querySelector('.xy-dialog__wrapper');\n        this.$wrapper.setAttribute('open', this.getAttribute('open'));\n\n        this.$closeBtn = this._shadowRoot.querySelector('.xy-dialog__close');\n        // 关闭按钮添加click监听\n        this.$closeBtn.addEventListener('click', this._close, false);\n    }\n\n    disconnectedCallback() {\n        console.log('disconnectedCallback');\n        // 清除click事件监听\n        this.$closeBtn.addEventListener('click', this._close, false);\n    }\n\n    adoptedCallback(oldDocument, newDocument) {\n        console.log('adoptedCallback');\n    }\n\n    _close(ev) {\n        console.log(ev);\n        ev.stopPropagation();\n        if (this.open) {\n            this.open = false;\n        }\n    }\n}\n\ncustomElements.define('xy-dialog', XyDialog);\n","style":"\n/* 组件CSS代码 */\n* {\n    padding: 0;\n    margin: 0;\n    outline: none;\n}\n\n.xy-dialog__wrapper[open=\"true\"] {\n    display: block;\n}\n\n.xy-dialog__wrapper {\n    border-radius: 10px;\n    overflow: hidden;\n    position: fixed;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    width: 60vw;\n    display: none;\n    height: 60vh;\n    border: 1px solid #e1e1e1;\n    background-color: #fff;\n}\n\n.xy-button {\n    background-color: #fff;\n    border: 1px solid #e1e1e1;\n    padding: 0 5px;\n    font-size: 12px;\n}\n\n.xy-dialog__wrapper .xy-dialog__head {\n    background-color: red;\n    position: relative;\n    height: 50px;\n    padding: 0 20px;\n    box-sizing: border-box;\n}\n\n.xy-dialog__head .xy-dialog__close {\n    position: absolute;\n    right: 20px;\n    top: 20px;\n}\n\n.xy-dialog__head .xy-dialog__title {\n    line-height: 50px;\n    color: #fff;\n}\n\n.xy-dialog__body {\n    margin-top: 0;\n    padding: 0 20px;\n    height: calc(100% - 100px);\n    margin-bottom: auto;\n    box-sizing: border-box;\n}\n\n.xy-dialog__body .xy-dialog__content {\n    min-height: 100%;\n    padding: 20px 0;\n    box-sizing: border-box;\n    border-bottom: 1px solid #e1e1e1;\n    background: #fff;\n}\n\n.xy-dialog__footer {\n    height: 50px;\n    line-height: 50px;\n    padding: 0 20px;\n    box-sizing: border-box;\n    text-align: right;\n}\n\n.xy-dialog__footer .xy-button {\n    padding: 5px 10px;\n    border-radius: 5px;\n}\n"})