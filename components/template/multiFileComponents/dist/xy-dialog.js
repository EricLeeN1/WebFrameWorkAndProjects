initComponent("xy-dialog",{"script":"class XyDialog extends HTMLElement {\r\n\r\n    static get observedAttributes() {\r\n        // 监听name属性\r\n        return ['name'];\r\n    }\r\n\r\n    constructor() {\r\n        super();\r\n        // 添加Shadow Dom\r\n        this._shadowRoot = this.attachShadow({ mode: 'open' });\r\n        this._tpl = document.querySelector('#xy-dialog-template');\r\n        this._close = this._close.bind(this);\r\n    }\r\n\r\n    get open() {\r\n        if (this.$wrapper && this.$wrapper.hasAttribute('open')) {\r\n            return JSON.parse(this.$wrapper.getAttribute('open'));\r\n        }\r\n        return false;\r\n    }\r\n\r\n    set open(status) {\r\n        this.$wrapper.setAttribute('open', status);\r\n    }\r\n\r\n    get name() {\r\n        return this.getAttribute('name') || '';\r\n    }\r\n\r\n    set name(val) {\r\n        return this.setAttribute('name', val);\r\n    }\r\n\r\n    attributeChangedCallback(name, oldVal, newVal, namespace) {\r\n        console.log(`${name} changed`);\r\n    }\r\n\r\n    connectedCallback() {\r\n        console.log('connectedCallback');\r\n\r\n        // 将模版结构注入shadowRoot\r\n        this._shadowRoot.appendChild(document.importNode(this._tpl.content, true));\r\n\r\n        const title = this.getAttribute('title');\r\n        const content = this.getAttribute('content');\r\n\r\n        if (title) {\r\n            const titleNode = document.createElement('h2');\r\n            titleNode.innerHTML = title;\r\n            this._shadowRoot.querySelector('.xy-dialog__title').appendChild(titleNode);\r\n        }\r\n\r\n        if (content) {\r\n            const contentNode = document.createTextNode(content);\r\n            this._shadowRoot.querySelector('.xy-dialog__content').appendChild(contentNode);\r\n        }\r\n        this.$wrapper = this._shadowRoot.querySelector('.xy-dialog__wrapper');\r\n        this.$wrapper.setAttribute('open', this.getAttribute('open'));\r\n\r\n        this.$closeBtn = this._shadowRoot.querySelector('.xy-dialog__close');\r\n        // 关闭按钮添加click监听\r\n        this.$closeBtn.addEventListener('click', this._close, false);\r\n    }\r\n\r\n    disconnectedCallback() {\r\n        console.log('disconnectedCallback');\r\n        // 清除click事件监听\r\n        this.$closeBtn.addEventListener('click', this._close, false);\r\n    }\r\n\r\n    adoptedCallback(oldDocument, newDocument) {\r\n        console.log('adoptedCallback');\r\n    }\r\n\r\n    _close(ev) {\r\n        console.log(ev);\r\n        ev.stopPropagation();\r\n        if (this.open) {\r\n            this.open = false;\r\n        }\r\n    }\r\n}\r\n\r\ncustomElements.define('xy-dialog', XyDialog);","style":"* {\r\n    padding: 0;\r\n    margin: 0;\r\n    outline: none;\r\n}\r\n\r\n.xy-dialog__wrapper[open=\"true\"] {\r\n    display: block;\r\n}\r\n\r\n.xy-dialog__wrapper {\r\n    border-radius: 10px;\r\n    overflow: hidden;\r\n    position: fixed;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 60vw;\r\n    display: none;\r\n    height: 60vh;\r\n    border: 1px solid #e1e1e1;\r\n    background-color: #fff;\r\n}\r\n\r\n.xy-button {\r\n    background-color: #fff;\r\n    border: 1px solid #e1e1e1;\r\n    padding: 0 5px;\r\n    font-size: 12px;\r\n}\r\n\r\n.xy-dialog__wrapper .xy-dialog__head {\r\n    background-color: red;\r\n    position: relative;\r\n    height: 50px;\r\n    padding: 0 20px;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.xy-dialog__head .xy-dialog__close {\r\n    position: absolute;\r\n    right: 20px;\r\n    top: 20px;\r\n}\r\n\r\n.xy-dialog__head .xy-dialog__title {\r\n    line-height: 50px;\r\n    color: #fff;\r\n}\r\n\r\n.xy-dialog__body {\r\n    margin-top: 0;\r\n    padding: 0 20px;\r\n    height: calc(100% - 100px);\r\n    margin-bottom: auto;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.xy-dialog__body .xy-dialog__content {\r\n    min-height: 100%;\r\n    padding: 20px 0;\r\n    box-sizing: border-box;\r\n    border-bottom: 1px solid #e1e1e1;\r\n    background: #fff;\r\n}\r\n\r\n.xy-dialog__footer {\r\n    height: 50px;\r\n    line-height: 50px;\r\n    padding: 0 20px;\r\n    box-sizing: border-box;\r\n    text-align: right;\r\n}\r\n\r\n.xy-dialog__footer .xy-button {\r\n    padding: 5px 10px;\r\n    border-radius: 5px;\r\n}\r\n","template":"<div class=\"xy-dialog__wrapper\">\r\n    <div class=\"xy-dialog__head\">\r\n        <button class=\"xy-button xy-dialog__close\">&times;</button>\r\n        <slot name=\"title\"></slot>\r\n    </div>\r\n    <div class=\"xy-dialog__body\">\r\n        <div class=\"xy-dialog__content\">\r\n            <slot name=\"content\"></slot>\r\n        </div>\r\n    </div>\r\n    <div class=\"xy-dialog__footer\">\r\n        <button class=\"xy-button xy-button-infos\">取消</button>\r\n        <button class=\"xy-button xy-button-success\">确定</button>\r\n    </div>\r\n</div>"})